
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ¤– TanujaNikitha AI Chat Bot</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

:root{
    --accent:#6bcf7f;
    --dark:#202123;
    --dark2:#2a2b32;
}

body{
    font-family:Poppins,sans-serif;
    background:linear-gradient(135deg,#f8cdda,#d1fdff);
    height:100vh;
    display:flex;
    overflow:hidden;
}

/* ===== ðŸ¤– AI BUBBLES ===== */
#bot-bubbles{
    position:fixed;
    inset:0;
    z-index:-1;
    pointer-events:none;
}
.bot-bubble{
    position:absolute;
    font-size:48px;
    opacity:0.12;
    animation:floatAI linear infinite;
}
@keyframes floatAI{
    0%{transform:translateY(110vh) scale(.6);opacity:0;}
    20%{opacity:.12;}
    100%{transform:translateY(-20vh) scale(1);opacity:0;}
}

/* ===== SIDEBAR ===== */
.sidebar{
    width:260px;
    background:var(--dark);
    color:#fff;
    padding:14px;
    display:flex;
    flex-direction:column;
}
.sidebar h3{
    text-align:center;
    margin-bottom:10px;
    font-size:16px;
}
.history{
    flex:1;
    overflow-y:auto;
}
.history-item{
    padding:10px;
    margin-bottom:6px;
    background:var(--dark2);
    border-radius:8px;
    font-size:13px;
    cursor:pointer;
}
.history-item:hover{background:#3a3b42}

/* ===== CHAT AREA ===== */
.chat-area{
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
}

.chat-app{
    width:100%;
    max-width:420px;
    height:90vh;
    background:#fff;
    border-radius:22px;
    box-shadow:0 20px 50px rgba(0,0,0,.15);
    display:flex;
    flex-direction:column;
    overflow:hidden;
}

/* HEADER */
.header{
    padding:16px;
    background:var(--accent);
    color:white;
    font-weight:600;
    font-size:18px;
    display:flex;
    align-items:center;
    gap:10px;
}

/* CHAT */
#chat-box{
    flex:1;
    padding:15px;
    overflow-y:auto;
    background:#f7f7f7;
    display:flex;
    flex-direction:column;
    gap:10px;
}

/* MESSAGES */
.message{
    max-width:75%;
    padding:12px 16px;
    border-radius:18px;
    font-size:14px;
    line-height:1.5;
}
.user{
    background:var(--accent);
    color:#fff;
    align-self:flex-end;
    border-bottom-right-radius:6px;
}
.bot{
    background:#e9e9eb;
    align-self:flex-start;
    border-bottom-left-radius:6px;
}
.loading{
    align-self:center;
    font-style:italic;
    font-size:13px;
}

/* INPUT BAR */
.input-bar{
    display:flex;
    padding:10px;
    gap:8px;
    background:white;
    border-top:1px solid #eee;
}
.input-bar input{
    flex:1;
    padding:12px 16px;
    border-radius:20px;
    border:none;
    background:#f2f2f2;
    outline:none;
}
.input-bar button{
    width:44px;
    height:44px;
    border:none;
    border-radius:50%;
    background:var(--accent);
    color:white;
    font-size:18px;
    cursor:pointer;
}

#file-input{display:none}

/* MOBILE */
@media(max-width:900px){
    .sidebar{display:none}
}
</style>
</head>

<body>

<!-- ðŸ¤– AI BUBBLES -->
<div id="bot-bubbles"></div>

<!-- SIDEBAR -->
<div class="sidebar">
    <h3>ðŸ’¬ Chat History</h3>
    <div class="history" id="history"></div>
</div>

<!-- CHAT -->
<div class="chat-area">
<div class="chat-app">

    <div class="header">ðŸ¤– TanujaNikitha AI Chat Bot</div>

    <div id="chat-box"></div>

    <div class="input-bar">
        <input id="user-input" placeholder="Ask me anything..."
               onkeydown="if(event.key==='Enter')sendMessage()">
        <button onclick="sendMessage()">âž¤</button>
        <button onclick="startVoice()">ðŸŽ¤</button>
        <label for="file-input">
            <button type="button">ðŸ“‚</button>
        </label>
        <input type="file" id="file-input" onchange="uploadFile(this)">
    </div>

</div>
</div>

<script>
const API="http://54.88.66.178:8080";

/* ðŸ¤– AI BUBBLES */
const layer=document.getElementById("bot-bubbles");
for(let i=0;i<18;i++){
    const b=document.createElement("div");
    b.className="bot-bubble";
    b.textContent="ðŸ¤–";
    b.style.left=Math.random()*100+"%";
    b.style.fontSize=(Math.random()*30+32)+"px";
    b.style.animationDuration=(Math.random()*18+12)+"s";
    b.style.animationDelay=(Math.random()*10)+"s";
    layer.appendChild(b);
}

/* CHAT */
function append(text,type){
    const box=document.getElementById("chat-box");
    const div=document.createElement("div");
    div.className="message "+type;
    div.textContent=text;
    box.appendChild(div);
    box.scrollTop=box.scrollHeight;
}

async function sendMessage(text=null){
    const input=document.getElementById("user-input");
    const msg=text||input.value.trim();
    if(!msg) return;

    append(msg,"user");
    append("Typing...","loading");
    input.value="";

    const r=await fetch(API+"/chat",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({message:msg})
    });

    document.querySelector(".loading")?.remove();
    const d=await r.json();
    append(d.response,"bot");
    loadHistory();
}

/* HISTORY */
async function loadHistory(){
    const r=await fetch(API+"/history");
    const data=await r.json();
    const h=document.getElementById("history");
    h.innerHTML="";
    data.forEach(x=>{
        const div=document.createElement("div");
        div.className="history-item";
        div.textContent=x.role.toUpperCase()+": "+x.message.slice(0,40);
        div.onclick=()=>append(x.message,x.role);
        h.appendChild(div);
    });
}
loadHistory();

/* VOICE */
function startVoice(){
    const R=window.SpeechRecognition||webkitSpeechRecognition;
    if(!R) return alert("Microphone requires HTTPS");
    const rec=new R();
    rec.onresult=e=>sendMessage(e.results[0][0].transcript);
    rec.start();
}

/* FILE UPLOAD */
async function uploadFile(inp){
    const f=inp.files[0];
    if(!f) return;
    append("ðŸ“‚ "+f.name,"user");

    const fd=new FormData();
    fd.append("file",f);
    const r=await fetch(API+"/upload",{method:"POST",body:fd});
    const d=await r.json();
    append(d.summary||"File processed","bot");
}
</script>

</body>
</html>

